<div class="donate-device-container">
    <h2 class="page-title">Donate a Device</h2>
    <p class="lead">Help bridge the digital divide by donating your unused devices.</p>

    <form (ngSubmit)="submitDonation()" #donationForm="ngForm">
        <div class="form-group">
            <label for="donorName">Your Name:</label>
            <input type="text" id="donorName" name="donorName" class="form-control" [(ngModel)]="donationData.donorName"
                required>
            <div *ngIf="donationForm.controls['donorName']?.invalid && (donationForm.controls['donorName']?.dirty || donationForm.controls['donorName']?.touched)"
                class="error-message">
                Your name is required.
            </div>
        </div>

        <div class="form-group">
            <label for="donorEmail">Your Email:</label>
            <input type="email" id="donorEmail" name="donorEmail" class="form-control"
                [(ngModel)]="donationData.donorEmail" required email>
            <div *ngIf="donationForm.controls['donorEmail']?.invalid && (donationForm.controls['donorEmail']?.dirty || donationForm.controls['donorEmail']?.touched)"
                class="error-message">
                Please enter a valid email address.
            </div>
        </div>

        <div class="form-group">
            <label for="deviceType">Device Type:</label>
            <select id="deviceType" name="deviceType" class="form-control" [(ngModel)]="donationData.deviceType"
                required>
                <option value="">Select Device Type</option>
                <option value="Laptop">Laptop</option>
                <option value="Tablet">Tablet</option>
                <option value="Smartphone">Smartphone</option>
                <option value="Other">Other</option>
            </select>
            <div *ngIf="donationForm.controls['deviceType']?.invalid && (donationForm.controls['deviceType']?.dirty || donationForm.controls['deviceType']?.touched)"
                class="error-message">
                Please select the device type.
            </div>
        </div>

        <div class="form-group">
            <label for="quantity">Quantity:</label>
            <input type="number" id="quantity" name="quantity" class="form-control" [(ngModel)]="donationData.quantity"
                required min="1">
            <div *ngIf="donationForm.controls['quantity']?.invalid && (donationForm.controls['quantity']?.dirty || donationForm.controls['quantity']?.touched)"
                class="error-message">
                Quantity must be at least 1.
            </div>
        </div>

        <div class="form-group">
            <label for="condition">Condition of Device(s):</label>
            <textarea id="condition" name="condition" class="form-control" [(ngModel)]="donationData.condition"
                rows="3"></textarea>
        </div>

        <div class="form-group">
            <label for="notes">Additional Notes:</label>
            <textarea id="notes" name="notes" class="form-control" [(ngModel)]="donationData.notes" rows="3"></textarea>
        </div>

        <button type="submit" class="primary-button" [disabled]="donationForm.invalid || loading">
            <i *ngIf="loading" class="fas fa-spinner fa-spin"></i> Submit Donation
        </button>

        <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
        <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
    </form>
</div>